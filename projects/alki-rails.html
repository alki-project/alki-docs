
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Alki::Rails Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="alki-reload.html" />
    
    
    <link rel="prev" href="alki-dsl/alki-loader.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"alki-project","repo":"alki","type":"star","size":"large"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Alki</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../assemblies/">
            
                <a href="../assemblies/">
            
                    
                    Assemblies
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../assemblies/project_assemblies.html">
            
                <a href="../assemblies/project_assemblies.html">
            
                    
                    Project Assemblies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../assemblies/manual_creation.html">
            
                <a href="../assemblies/manual_creation.html">
            
                    
                    Manually Creating Assemblies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../assemblies/using.html">
            
                <a href="../assemblies/using.html">
            
                    
                    Using Assemblies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../assemblies/overrides.html">
            
                <a href="../assemblies/overrides.html">
            
                    
                    Overrides
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../assemblies/executables.html">
            
                <a href="../assemblies/executables.html">
            
                    
                    Executables
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../dsl/">
            
                <a href="../dsl/">
            
                    
                    Assembly Definitions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../dsl/scope.html">
            
                <a href="../dsl/scope.html">
            
                    
                    Scope
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../dsl/helpers.html">
            
                <a href="../dsl/helpers.html">
            
                    
                    Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../dsl/group.html">
            
                <a href="../dsl/group.html">
            
                    
                    group
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../dsl/load.html">
            
                <a href="../dsl/load.html">
            
                    
                    load
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../dsl/set.html">
            
                <a href="../dsl/set.html">
            
                    
                    set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../dsl/func.html">
            
                <a href="../dsl/func.html">
            
                    
                    func
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../dsl/service.html">
            
                <a href="../dsl/service.html">
            
                    
                    service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../dsl/factory.html">
            
                <a href="../dsl/factory.html">
            
                    
                    factory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../dsl/mount.html">
            
                <a href="../dsl/mount.html">
            
                    
                    mount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../dsl/try_mount.html">
            
                <a href="../dsl/try_mount.html">
            
                    
                    try_mount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../dsl/overlay.html">
            
                <a href="../dsl/overlay.html">
            
                    
                    overlay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../dsl/tag.html">
            
                <a href="../dsl/tag.html">
            
                    
                    tag
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../dsl/overlay_tag.html">
            
                <a href="../dsl/overlay_tag.html">
            
                    
                    overlay_tag
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Alki Projects</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="alki-loader.html">
            
                <a href="alki-loader.html">
            
                    
                    Alki::Loader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="alki-dsl/">
            
                <a href="alki-dsl/">
            
                    
                    Alki::Dsl
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="alki-dsl/methods.html">
            
                <a href="alki-dsl/methods.html">
            
                    
                    DSL Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="alki-dsl/init-finish.html">
            
                <a href="alki-dsl/init-finish.html">
            
                    
                    Init and Finish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="alki-dsl/state.html">
            
                <a href="alki-dsl/state.html">
            
                    
                    DSL State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="alki-dsl/require.html">
            
                <a href="alki-dsl/require.html">
            
                    
                    Combining DSLs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5" data-path="alki-dsl/helpers.html">
            
                <a href="alki-dsl/helpers.html">
            
                    
                    DSL Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.6" data-path="alki-dsl/alki-loader.html">
            
                <a href="alki-dsl/alki-loader.html">
            
                    
                    Using with Alki::Loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="2.4" data-path="alki-rails.html">
            
                <a href="alki-rails.html">
            
                    
                    Alki::Rails
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="alki-reload.html">
            
                <a href="alki-reload.html">
            
                    
                    Alki::Reload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="alki-console.html">
            
                <a href="alki-console.html">
            
                    
                    Alki::Console
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Alki::Rails</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="alkirails">Alki::Rails</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Rails integration for Alki! Allows easily using Alki in your Rails project. Alki is a dependency injection and program organization framework.</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/alki-projects/alki-rails" target="_blank">Project on Github</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_use_alki_with_rails">Why use Alki with Rails?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While Rails is a fantastic web framework, it doesn&#x2019;t offer a lot of tools to manage your
core business logic. Common idioms like &quot;Fat Model&quot; or &quot;Fat Controller&quot; work ok for a while,
but most large Rails projects get to a point where their business logic grows beyond
Rails&apos; basic MVC paradigm.</p>
</div>
<div class="paragraph">
<p>Using Alki to manage your business logic allows your Rails code to focus on what it does best:
serve web pages. With Alki::Rails, Alki integrates seamlessly with Rails, while also keeping
your core code encapsulated.</p>
</div>
<div class="sect2">
<h3 id="_what_about_rails_services">What about Rails Services?</h3>
<div class="paragraph">
<p>Recent versions of Rails have added an <code>app/services</code> directory as a place to put
dedicated service classes containing your business logic.</p>
</div>
<div class="paragraph">
<p>The key difference between these Rails services and Alki services is that Rails services are
classes or modules,
while Alki services can be any type of object.</p>
</div>
<div class="paragraph">
<p>By using objects, Alki allows services to be configured and dependency injected before
being used, allowing classes to be simpler, more focused, and easily tested.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add this line to your Rails application&#x2019;s Gemfile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">gem <span class="hljs-string">&apos;alki-rails&apos;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And then execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ bundle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, run the generator to create an empty <code>config/assembly.rb</code> and to make your
assembly elements accessible in your controllers and in the console.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>$ bin/rails generate alki</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Elements like services and application settings are defined in your Assembly definition
(<code>config/assembly.rb</code>). These elements are accessible by name directly within controllers
and the rails console.</p>
</div>
<div class="paragraph">
<p>See <a href="http://alki.io" target="_blank">alki.io</a> for more documentation on how to use Alki.</p>
</div>
<div class="listingblock">
<div class="title">config/assembly.rb</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">Alki <span class="hljs-keyword">do</span>
  group <span class="hljs-symbol">:orders</span> <span class="hljs-keyword">do</span>
    service <span class="hljs-symbol">:manager</span> <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">require</span> <span class="hljs-string">&apos;order_manager&apos;</span>
      OrderManager.new model, payment_processor
    <span class="hljs-keyword">end</span>

    service <span class="hljs-symbol">:model</span> <span class="hljs-keyword">do</span>
      Order
    <span class="hljs-keyword">end</span>

    service <span class="hljs-symbol">:payment_processor</span> <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">require</span> <span class="hljs-string">&apos;stripe_processor&apos;</span>
      StripeProcessor.new
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">app/controllers/orders_controller.rb</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrdersController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post</span></span>
    <span class="hljs-comment"># Can reference Assembly elements directly in controllers</span>
    @order = orders.manager.place_order params[<span class="hljs-symbol">:order</span>]
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">lib/order_manager.rb</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderManager</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(model,payment_processor)</span></span>
    @model = model
    @payment_processor = payment_processor
  <span class="hljs-keyword">end</span>

  ...
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">lib/stripe_processor.rb</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StripeProcessor</span></span>
  ...
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Elements can also be accessed directly in the rails console,
or anywhere in your Rails application, via <code>Alki::Rails</code>:</p>
</div>
<div class="listingblock">
<div class="title">config/assembly.rb</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">Alki <span class="hljs-keyword">do</span>
  group <span class="hljs-symbol">:settings</span> <span class="hljs-keyword">do</span>
    set <span class="hljs-symbol">:msg</span>, <span class="hljs-string">&apos;Hello World&apos;</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Rails Console</div>
<div class="content">
<pre class="highlight"><code>2.3.2 :001 &gt; settings.msg
 =&gt; &apos;Hello World&apos;
2.3.2 :001 &gt; Alki::Rails.settings.msg
 =&gt; &apos;Hello World&apos;</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_code_reloading">Code Reloading</h3>
<div class="paragraph">
<p>Alki::Rails automatically will set up <a href="projects/alki-reload.adoc">Alki::Reload</a> and enable it whenever
Rails itself has code reloading enabled. It will handle reloading all Alki configuration files and files in <code>lib/</code>.</p>
</div>
<div class="paragraph">
<p>Generally the Rails and Alki code reloading systems should work together without any issues.
One place however where they do work differently is in the console.
Alki does not require the <code>reload!</code> method to be called and will automatically reload code as soon as it changes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributing">Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/alki-project/alki-rails" target="_blank">https://github.com/alki-project/alki-rails</a>. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="http://contributor-covenant.org" target="_blank">Contributor Covenant</a> code of conduct.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The gem is available as open source under the terms of the <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a>.</p>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="alki-dsl/alki-loader.html" class="navigation navigation-prev " aria-label="Previous page: Using with Alki::Loader">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="alki-reload.html" class="navigation navigation-next " aria-label="Next page: Alki::Reload">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Alki::Rails","level":"2.4","depth":1,"next":{"title":"Alki::Reload","level":"2.5","depth":1,"path":"projects/alki-reload.adoc","ref":"projects/alki-reload.adoc","articles":[]},"previous":{"title":"Using with Alki::Loader","level":"2.3.6","depth":2,"path":"projects/alki-dsl/alki-loader.adoc","ref":"projects/alki-dsl/alki-loader.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["forkmegithub","ga","github-buttons"],"pluginsConfig":{"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"github-buttons":{"buttons":[{"user":"alki-project","repo":"alki","type":"star","size":"large"}]},"ga":{"configuration":"auto","token":"UA-116417946-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"forkmegithub":{"color":"gray","url":"https://github.com/alki-project/alki"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"projects/alki-rails.adoc","mtime":"2018-04-02T11:02:45.710Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2018-04-02T11:03:25.502Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

